local userInputService = game:GetService("UserInputService")
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

local throughWalls = false

local function toggleThroughWalls()
  throughWalls = not throughWalls
  if throughWalls then
    rootPart.CanCollide = false
    humanoid.WalkSpeed = humanoid.WalkSpeed * 1.5 -- Optional: Increase speed for better effect
    print("Through walls enabled!")
  else
    rootPart.CanCollide = true
    humanoid.WalkSpeed = humanoid.WalkSpeed / 1.5 -- Optional: Revert speed
    print("Through walls disabled!")
  end
end

userInputService.InputBegan:Connect(function(input, gameProcessedEvent)
  if gameProcessedEvent then return end
  if input.KeyCode == Enum.KeyCode.T then
    toggleThroughWalls()
  end
end)

-- Optional: Handle character respawn
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
    if throughWalls then
        rootPart.CanCollide = false --re-enable if character respawns while through walls is active.
    end
end)
