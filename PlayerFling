local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local character = LocalPlayer.Character
local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")

local flingForce = 1000 -- Adjust the fling force as needed

local function getClosestPlayer()
    local closestPlayer = nil
    local closestDistance = math.huge

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local targetHumanoidRootPart = player.Character.HumanoidRootPart
            local distance = (humanoidRootPart.Position - targetHumanoidRootPart.Position).Magnitude

            if distance < closestDistance then
                closestDistance = distance
                closestPlayer = player
            end
        end
    end

    return closestPlayer
end

local function flingPlayer()
    if humanoidRootPart then
        local targetPlayer = getClosestPlayer()

        if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local targetHumanoidRootPart = targetPlayer.Character.HumanoidRootPart

            local bodyVelocity = Instance.new("BodyVelocity")
            bodyVelocity.Parent = targetHumanoidRootPart
            bodyVelocity.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            bodyVelocity.Velocity = (targetHumanoidRootPart.Position - humanoidRootPart.Position).Unit * flingForce

            RunService.Heartbeat:Wait(0.5) -- Adjust the duration as needed
            bodyVelocity:Destroy()
        end
    end
end

UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if input.KeyCode == Enum.KeyCode.T and not gameProcessedEvent then -- Change "T" to your preferred key
        flingPlayer()
    end
end)
