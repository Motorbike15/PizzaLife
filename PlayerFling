# Fix

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local flingForce = 1200
local flingUpForce = 80
local randomness = 10

-- Find closest player
local function getClosestPlayer()
    local closestPlayer = nil
    local closestDistance = math.huge

    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local localHRP = LocalPlayer.Character.HumanoidRootPart

        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local targetHRP = player.Character.HumanoidRootPart
                local distance = (localHRP.Position - targetHRP.Position).Magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = player
                end
            end
        end
    end
    return closestPlayer
end

-- Visual fling effect (client-side only)
local function flingVisual(targetPlayer)
    if not targetPlayer or not targetPlayer.Character or not targetPlayer.Character:FindFirstChild("HumanoidRootPart") then return end

    local HRP = targetPlayer.Character.HumanoidRootPart
    -- Fake effect: move your own character away from them for fun
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local localHRP = LocalPlayer.Character.HumanoidRootPart
        local direction = (HRP.Position - localHRP.Position).Unit
        local velocity = Vector3.new(
            direction.X * flingForce + math.random(-randomness, randomness),
            flingUpForce,
            direction.Z * flingForce + math.random(-randomness, randomness)
        )
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        bodyVelocity.Velocity = velocity
        bodyVelocity.Parent = localHRP

        game:GetService("Debris"):AddItem(bodyVelocity, 2.5)
    end
end

-- Input
UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if gameProcessedEvent then return end
    if input.KeyCode == Enum.KeyCode.T then
        local closest = getClosestPlayer()
        if closest then
            flingVisual(closest)
        end
    end
end)
